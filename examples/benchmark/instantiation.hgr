"""
 Instantiation benchmark stresses instance creation and initializer calling.

 Author: Irwin Rodr√≠guez <rodriguez.irwin@gmail.com>
 Date: 2023-02-26
"""

def cFoo
    -pInit()
end

let nStart = tick()
let nI = 0

while nI < 500000
    new cFoo() | new cFoo() | new cFoo() | new cFoo() | new cFoo() | 
    new cFoo() | new cFoo() | new cFoo() | new cFoo() | new cFoo() | 
    new cFoo() | new cFoo() | new cFoo() | new cFoo() | new cFoo() | 
    new cFoo() | new cFoo() | new cFoo() | new cFoo() | new cFoo() | 
    new cFoo() | new cFoo() | new cFoo() | new cFoo() | new cFoo() | 
    new cFoo() | new cFoo() | new cFoo() | new cFoo() | new cFoo() |
    nI += 1
end

print("Elapsed time: " & tack(nStart) & " ms")